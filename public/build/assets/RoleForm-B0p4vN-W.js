import{j as r}from"./app-Bfr3ilWS.js";import{u as f,a as g,b as j,F,c as y,d as b,o as d,e as N,f as S,g as v,h as C,i as h,s as u,n as p}from"./schemas-DAI0Vocq.js";import{B as q}from"./button-CTysMQeY.js";import{C as E}from"./checkbox-wYqdShj5.js";import{u as R}from"./use-fetch-DQ0WWVov.js";import{s as k}from"./index-7wdhQkem.js";import{q as Q}from"./index-CMWG4mbA.js";import{r as c}from"./index-BVuFwbu2.js";/* empty css            */import"./label-Bbe-IdCh.js";import"./index-DcW89Wc_.js";import"./input-N9m5tZxR.js";import"./x-DqJnRH0c.js";import"./app-action-alert-BiRRQwLr.js";import"./index-8O0JOdty.js";import"./index-Dpw5mTcd.js";import"./trash-2-CZwX6W9j.js";import"./loader-circle-DSGolx09.js";import"./check-oUXb-bS7.js";import"./badge-CeVFtSOg.js";const s=e=>({url:s.url(e),method:"get"});s.definition={methods:["get","head"],url:"/api/security/permissions"};s.url=e=>s.definition.url+Q(e);s.get=e=>({url:s.url(e),method:"get"});s.head=e=>({url:s.url(e),method:"head"});const l=e=>({action:s.url(e),method:"get"});l.get=e=>({action:s.url(e),method:"get"});l.head=e=>({action:s.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});s.form=l;Object.assign(c,c),Object.assign(s,s);const A=d({name:u().min(2).max(255),permissions:h(p()).optional()}),B=d({name:u().min(2).max(255),permissions:h(p()).optional()}),I=[{name:"name",label:"Name",type:"text",placeholder:{create:"Enter Name",edit:"Enter Name"},description:{create:"This is the Name field.",edit:"This is the Name field."}}],O=({form:e})=>{const o=R(s().url);return r.jsx(r.Fragment,{children:o.data&&o.data.length>0&&r.jsx("div",{className:"",children:r.jsx(N,{control:e.control,name:"permissions",render:({field:a})=>r.jsx("div",{className:"space-y-6",children:o.data?.map(i=>r.jsxs("div",{children:[r.jsx("h4",{className:"mb-2 font-semibold text-md",children:i.category}),r.jsx("div",{className:"gap-4 grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))]",children:i.permissions.map(t=>r.jsxs(S,{className:"flex items-center space-x-2",children:[r.jsx(v,{children:r.jsx(E,{checked:a.value?.includes(t.id),onCheckedChange:n=>{const m=a.value||[];return n?a.onChange([...m,t.id]):a.onChange(m.filter(x=>x!==t.id))}})}),r.jsx(C,{className:"font-normal",children:t.name})]},t.id))})]},i.category))})})})})},P=()=>r.jsx(q,{type:"reset",className:"col-span-2 px-3 py-1 w-full text-sm"}),se=({data:e,isEdit:o=!1,onSubmit:a})=>{const t=f({resolver:g(o?A:B),defaultValues:{name:e?.name||"",permissions:e?.permissions_ids||[]}}),{handleSubmit:n}=j({onSubmit:a,isEdit:o,entityId:e?.id,entityPath:k().url});return r.jsx(F,{...t,children:r.jsx("form",{onSubmit:t.handleSubmit(n),className:"space-y-8",children:r.jsx(y,{ext:r.jsx(O,{form:t}),actions:[P()],children:I.map(m=>r.jsx(b,{control:t.control,fieldConfig:m,isEdit:o},m.name))})})})};export{se as default};
