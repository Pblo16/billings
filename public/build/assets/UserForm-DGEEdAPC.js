import{j as l}from"./app-Bfr3ilWS.js";import{u as F,a as f,b as x,F as S,c as w,d as U,o as d,j as o,_ as n,s as t,k as c,i as u,n as p}from"./schemas-DAI0Vocq.js";import{p as g}from"./index-BVuFwbu2.js";import{s as E}from"./index-Cc5hkCQ3.js";import{a as j,q as A}from"./index-CMWG4mbA.js";/* empty css            */import"./button-CTysMQeY.js";import"./label-Bbe-IdCh.js";import"./index-DcW89Wc_.js";import"./input-N9m5tZxR.js";import"./x-DqJnRH0c.js";import"./app-action-alert-BiRRQwLr.js";import"./index-8O0JOdty.js";import"./index-Dpw5mTcd.js";import"./trash-2-CZwX6W9j.js";import"./loader-circle-DSGolx09.js";import"./check-oUXb-bS7.js";import"./badge-CeVFtSOg.js";const s=(e,r)=>({url:s.url(e,r),method:"delete"});s.definition={methods:["delete"],url:"/users/{user}/documents/{document}"};s.url=(e,r)=>{Array.isArray(e)&&(e={user:e[0],document:e[1]}),e=j(e);const i={user:typeof e.user=="object"?e.user.id:e.user,document:e.document};return s.definition.url.replace("{user}",i.user.toString()).replace("{document}",i.document.toString()).replace(/\/+$/,"")+A(r)};s.delete=(e,r)=>({url:s.url(e,r),method:"delete"});const h=(e,r)=>({action:s.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});h.delete=(e,r)=>({action:s.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});s.form=h;const N=d({name:t().min(2,"Name must be at least 2 characters").max(50,"Name must be at most 50 characters"),email:t().email("Please enter a valid email address"),password:t().optional(),roles:u(o([p(),t().transform(e=>parseInt(e,10))])).optional(),cv:o([n(File),t(),c()]).optional(),avatar:o([n(File),t(),c()]).optional()}),q=d({name:t().min(2,"Name must be at least 2 characters").max(50,"Name must be at most 50 characters"),email:t().email("Please enter a valid email address"),password:t().min(8,"Password must be at least 8 characters"),roles:u(o([p(),t().transform(e=>parseInt(e,10))])).optional(),cv:o([n(File),t(),c()]).optional(),avatar:o([n(File),t(),c()]).optional()}),P=[{name:"name",label:"Name",type:"text",placeholder:{create:"Enter name",edit:"Enter name"},description:{create:"This is the user's display name.",edit:"This is the user's display name."}},{name:"email",label:"Email",type:"email",placeholder:{create:"user@example.com",edit:"user@example.com"},description:{create:"Enter the user's email address.",edit:"Enter the user's email address."}},{name:"password",label:"Password",type:"password",placeholder:{create:"Enter password",edit:"Leave blank to keep current password"},description:{create:"Enter the user's password (minimum 8 characters).",edit:"Leave empty to keep the current password, or enter a new one to change it."},optional:!0},{name:"roles",label:"Roles",type:"multi-select",placeholder:{create:"Select roles",edit:"Select roles"},description:{create:"Assign roles to the user.",edit:"Modify the user roles as needed."},optional:!0,searchUrl:g({query:{format:"combobox"}}).url,show:5},{name:"cv",label:"CV",type:"file",mimeTypes:["application/pdf"],maxFileSizeMB:10,placeholder:{create:"Upload CV",edit:"Update CV"},description:{create:"Upload the user CV.",edit:"Update the user CV."},optional:!0},{name:"avatar",label:"Avatar",type:"image",optional:!0,placeholder:{create:"Upload Avatar",edit:"Update Avatar"},description:{create:"Upload the user avatar.",edit:"Update the user avatar."},maxFileSizeMB:5,mimeTypes:["image/jpeg","image/png","image/gif"]}],W=({data:e,isEdit:r=!1,onSubmit:i,submitButtonText:y="Submit"})=>{const m=F({resolver:f(r?N:q),defaultValues:{name:e?.name||"",email:e?.email||"",password:e?.password||"",roles:e?.roles?.map(a=>a.id)||void 0,cv:e?.documents?.[0]?.path||void 0,avatar:e?.avatar||void 0}}),{handleSubmit:v}=x({onSubmit:i,isEdit:r,entityId:e?.id,entityPath:E().url}),b=P.map(a=>a.name==="cv"&&e?.documents?.[0]?{...a,existingFileName:e.documents[0].name,existingFileUrl:e.documents[0].url,deleteUrl:s.url({user:e.id,document:e.documents[0].id})}:a.name==="avatar"&&e?.avatar?{...a,existingFileUrl:e.avatar,existingFileName:"Avatar"}:a);return l.jsx(S,{...m,children:l.jsx("form",{onSubmit:m.handleSubmit(v),className:"space-y-8",children:l.jsx(w,{isSubmitting:m.formState.isSubmitting,submitButtonText:y,children:b.map(a=>l.jsx(U,{control:m.control,fieldConfig:a,isEdit:r,errors:m.formState.errors},a.name))})})})};export{W as default};
