import{u as g,j as s}from"./app-Bfr3ilWS.js";import{u as T,a as E,b as U,F as j,c as _,d as q,o as u,j as m,i as d,n,s as i,_ as p,k as h}from"./schemas-DAI0Vocq.js";import{p as c}from"./index-DwcK5SyF.js";import{s as N}from"./index-53KoLe1f.js";import{a as A,q as Q}from"./index-CMWG4mbA.js";/* empty css            */import"./button-CTysMQeY.js";import"./label-Bbe-IdCh.js";import"./index-DcW89Wc_.js";import"./input-N9m5tZxR.js";import"./x-DqJnRH0c.js";import"./app-action-alert-BiRRQwLr.js";import"./index-8O0JOdty.js";import"./index-Dpw5mTcd.js";import"./trash-2-CZwX6W9j.js";import"./loader-circle-DSGolx09.js";import"./check-oUXb-bS7.js";import"./badge-CeVFtSOg.js";const r=(e,t)=>({url:r.url(e,t),method:"delete"});r.definition={methods:["delete"],url:"/global/posts/{post}/documents/{document}"};r.url=(e,t)=>{Array.isArray(e)&&(e={post:e[0],document:e[1]}),e=A(e);const l={post:typeof e.post=="object"?e.post.id:e.post,document:e.document};return r.definition.url.replace("{post}",l.post.toString()).replace("{document}",l.document.toString()).replace(/\/+$/,"")+Q(t)};r.delete=(e,t)=>({url:r.url(e,t),method:"delete"});const b=(e,t)=>({action:r.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});b.delete=(e,t)=>({action:r.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});r.form=b;Object.assign(r,r);const D=u({name:i().min(2).max(255),slug:i().min(2).max(255),text:i().optional(),user_id:n(),colaborators:d(m([n(),i().transform(e=>parseInt(e,10))])).optional(),article:m([p(File),i(),h()]).optional()}),I=u({name:i().min(2).max(255),slug:i().min(2).max(255),text:i().optional(),user_id:n(),colaborators:d(m([n(),i().transform(e=>parseInt(e,10))])).optional(),article:m([p(File),i(),h()]).optional()}),P=[{name:"name",label:"Name",type:"text",placeholder:{create:"Enter Name",edit:"Enter Name"},description:{create:"This is the Name field.",edit:"This is the Name field."}},{name:"slug",label:"Slug",type:"text",placeholder:{create:"Enter Slug",edit:"Enter Slug"},description:{create:"This is the Slug field.",edit:"This is the Slug field."},onEditDisabled:!0,readOnly:!0},{name:"text",label:"Text",type:"text",placeholder:{create:"Enter Text",edit:"Enter Text"},description:{create:"This is the Text field.",edit:"This is the Text field."}},{name:"user_id",label:"User id",type:"select",placeholder:{create:"Search user...",edit:"Search user..."},description:{create:"Search and select a user.",edit:"Search and select a user."},searchUrl:c().url,show:5},{name:"colaborators",label:"Colaborators",type:"multi-select",placeholder:{create:"Search user...",edit:"Search user..."},description:{create:"Search and select a user.",edit:"Search and select a user."},searchUrl:c({query:{format:"combobox"}}).url,show:5},{name:"article",label:"Article",type:"file",mimeTypes:["application/pdf"],maxFileSizeMB:10,placeholder:{create:"Upload Article",edit:"Update Article"},description:{create:"Upload the article.",edit:"Update the article."},optional:!0}],Z=({data:e,isEdit:t=!1,onSubmit:l,submitButtonText:f="Submit"})=>{const y=t?D:I,{auth:x}=g().props,a=T({resolver:E(y),defaultValues:{name:e?.name||"",slug:e?.slug||crypto.randomUUID(),text:e?.text||"",user_id:e?.user?.id||x.user.id,colaborators:e?.details?e.details.map(o=>o.colaborator?.id).filter(o=>typeof o=="number"):[],article:null}}),{handleSubmit:S}=U({onSubmit:l,isEdit:t,entityId:e?.id,entityPath:N().url}),F=P.map(o=>o.name==="article"&&e?.documents?.[0]?{...o,existingFileName:e.documents[0].name,existingFileUrl:e.documents[0].url,deleteUrl:r.url({post:e.id,document:e.documents[0].id})}:o);return s.jsx(j,{...a,children:s.jsx("form",{onSubmit:a.handleSubmit(S),className:"space-y-8",children:s.jsx(_,{isSubmitting:a.formState.isSubmitting,submitButtonText:f,children:F.map(o=>s.jsx(q,{control:a.control,fieldConfig:o,isEdit:t,errors:a.formState.errors},o.name))})})})};export{Z as default};
